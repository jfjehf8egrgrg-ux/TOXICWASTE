<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TOXIC WASTE</title>
<style>
body {
  margin:0; min-height:100vh; font-family:Arial,sans-serif;
  overflow-x:hidden; background:url("img/background.gif") no-repeat center center fixed;
  background-size:cover; display:flex; flex-direction:column; align-items:center;
  --gx:12px; --gy:8px; --megaDur:0.35s; --c1:red; --c2:cyan; --c3:lime;
}

/* LOGO */
.logo { margin-top:30px; pointer-events:none; animation: logoFloat 3.5s ease-in-out infinite; }
.logo img { max-width:220px; }
@keyframes logoFloat {50% {transform: translateY(-14px);}}

/* IMAGES */
.images { display:flex; gap:90px; margin-top:140px; }
.image-block { position:relative; text-align:center; }
.zoomable { max-width:260px; cursor:pointer; transition: transform .35s cubic-bezier(.2,.8,.2,1); }
.zoomable:hover { transform: scale(1.06); }
.noglitch { max-width:260px; cursor:default; }

/* TEXT */
.caption,.hint { margin-top:10px; font-size:18px; font-weight:bold; color:#fff;
  text-shadow:2px 0 red,-2px 0 cyan,0 0 8px rgba(0,0,0,.9);
}

/* MICRO GLITCH */
.noise-glitch { position:fixed; pointer-events:none; z-index:90; background:rgba(255,255,255,.75);
  filter: drop-shadow(-2px 0 red) drop-shadow(2px 0 cyan);
}

/* MEGA GLITCH */
.site-glitch, .element-glitch {
  animation: siteGlitch var(--megaDur) steps(1);
}
@keyframes siteGlitch {
  0% { transform:none; }
  10% { transform: translate(var(--gx), var(--gy)) rotate(1deg) scale(1.02); }
  25% { transform: translate(calc(var(--gx)*-1), calc(var(--gy)*0.5)) rotate(-1deg) scale(1.01);
       filter: drop-shadow(-20px 0 var(--c1)) drop-shadow(20px 0 var(--c2)) drop-shadow(0 20px var(--c3)); }
  50% { transform: translate(var(--gx), calc(var(--gy)*-1)) rotate(2deg) scale(1.03); }
  75% { transform: translate(calc(var(--gx)*-0.5), var(--gy)) rotate(-2deg) scale(1.02);
       filter: drop-shadow(-15px 0 var(--c1)) drop-shadow(15px 0 var(--c2)) drop-shadow(0 15px var(--c3)); }
  100% { transform:none; filter:none; }
}

/* VIEWER */
.viewer { position:fixed; inset:0; background:rgba(0,0,0,.65);
  display:none; justify-content:center; align-items:center; z-index:200; }
.viewer.active { display:flex; }
.viewer img { max-width:50vw; max-height:70vh; }
.zoom-in { animation:zoomIn .28s ease-out forwards; }
.zoom-out { animation:zoomOut .25s ease-in forwards; }
@keyframes zoomIn { from {transform:scale(.4); opacity:0;} to {transform:scale(1); opacity:1;} }
@keyframes zoomOut { to {transform:scale(.25); opacity:0;} }

/* GREEN SPLASH */
.particle { position:fixed; width:6px; height:6px; background:#39ff14;
  box-shadow:0 0 12px #39ff14; border-radius:50%; pointer-events:none; z-index:300;
  animation:splash .8s ease-out forwards; }
@keyframes splash { to { transform:translate(var(--x),var(--y)) scale(.1); opacity:0;} }
</style>
</head>
<body>

<div class="logo"><img src="img/logo3.png"></div>

<div class="images">
  <div class="image-block"><img src="img/1.png" class="zoomable"><div class="hint">нажми меня!</div></div>
  <div class="image-block"><img src="img/2.png" class="zoomable"><div class="caption">нажми меня!</div></div>
  <div class="image-block"><img src="img/animation.gif" class="noglitch"><div class="caption">14.1</div></div>
</div>

<div class="viewer" id="viewer"><img id="viewerImg"></div>

<script>
let clickCount = 0;

/* GREEN SPLASH */
function greenSplash(x,y){
  for(let i=0;i<26;i++){
    const p=document.createElement('div');
    p.className='particle';
    p.style.left=x+'px'; p.style.top=y+'px';
    const a=Math.random()*Math.PI*2, r=Math.random()*180+40;
    p.style.setProperty('--x',Math.cos(a)*r+'px'); p.style.setProperty('--y',Math.sin(a)*r+'px');
    document.body.appendChild(p);
    setTimeout(()=>p.remove(),800);
  }
}

/* RANDOM COLOR */
function randomColor(){ 
  const r=Math.floor(Math.random()*255), g=Math.floor(Math.random()*255), b=Math.floor(Math.random()*255);
  return `rgb(${r},${g},${b})`;
}

/* IMAGE VIEWER + RESET */
const viewer=document.getElementById('viewer');
const viewerImg=document.getElementById('viewerImg');

document.querySelectorAll('.zoomable').forEach(img=>{
  img.addEventListener('click',e=>{
    e.stopPropagation();
    clickCount = 0; 
    updateGlobalGlitch();
    viewerImg.src = img.src;
    viewerImg.className='zoom-in';
    viewer.classList.add('active');
  });
});

viewer.addEventListener('click',()=>{
  viewerImg.className='zoom-out';
  setTimeout(()=>viewer.classList.remove('active'),250);
});

/* ================= UPDATE GLOBAL GLITCH ================= */
function updateGlobalGlitch(){
  const level = Math.floor(clickCount/10);
  document.body.style.setProperty('--gx', 12 + level*20 + 'px');
  document.body.style.setProperty('--gy', 8 + level*15 + 'px');
  document.body.style.setProperty('--megaDur', 0.35 + level*0.05 + 's');

  if(clickCount>0 && clickCount % 10 === 0){
    const c1=randomColor(), c2=randomColor(), c3=randomColor();
    document.body.style.setProperty('--c1', c1);
    document.body.style.setProperty('--c2', c2);
    document.body.style.setProperty('--c3', c3);

    // Глитч для всех элементов
    document.querySelectorAll('body *').forEach(el=>{
      el.classList.add('element-glitch');
      // случайная небольшая тряска для отдельного элемента
      const offsetX = (Math.random()-0.5)*30*level + 'px';
      const offsetY = (Math.random()-0.5)*30*level + 'px';
      el.style.transform = `translate(${offsetX},${offsetY}) rotate(${(Math.random()-0.5)*20}deg)`;
      setTimeout(()=>{
        el.classList.remove('element-glitch');
        el.style.transform = '';
      }, 400 + level*100);
    });
  }
}

/* CONSTANT MICRO GLITCH */
setInterval(()=>{
  const level = Math.floor(clickCount/10);
  const amount = 2 + level*3;
  for(let i=0;i<amount;i++){
    const n=document.createElement('div');
    n.className='noise-glitch';
    const w=Math.random()*(14+level*3)+4, h=Math.random()*3+1;
    n.style.width=w+'px'; n.style.height=h+'px';
    n.style.left=Math.random()*(innerWidth-w)+'px'; n.style.top=Math.random()*(innerHeight-h)+'px';
    document.body.appendChild(n);
    setTimeout(()=>n.remove(), Math.max(30,110 - level*6));
  }
},40);

/* GLOBAL CLICK */
document.addEventListener('click', e=>{
  clickCount++;
  greenSplash(e.clientX,e.clientY);
  updateGlobalGlitch();
});
</script>

</body>
</html>


