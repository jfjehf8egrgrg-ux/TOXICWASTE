<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TOXIC WASTE</title>

<style>
body {
  margin:0;
  min-height:100vh;
  font-family:Arial,sans-serif;
  overflow:hidden;
  background:url("img/background.gif") no-repeat center center fixed;
  background-size:cover;
  display:flex;
  flex-direction:column;
  align-items:center;
}

body.rgb-glitch {
  filter:
    drop-shadow(var(--rgbR) 0 red)
    drop-shadow(calc(var(--rgbR)*-1) 0 cyan);
}

.logo {
  margin-top:30px;
  cursor:pointer;
  animation:float 3.5s ease-in-out infinite;
}
.logo img { max-width:220px; }
@keyframes float { 50% { transform:translateY(-14px); } }

.images { display:flex; gap:90px; margin-top:140px; }
.zoomable { max-width:260px; cursor:pointer; }

.noise-glitch {
  position:fixed;
  pointer-events:none;
  background:white;
  z-index:50;
}

/* ====== 1 FRAME FACE ====== */
.face-frame {
  position:fixed;
  inset:0;
  background:black;
  display:flex;
  justify-content:center;
  align-items:center;
  z-index:9999;
  pointer-events:none;
}
.face-frame img {
  max-width:80vw;
  filter:contrast(180%) saturate(0);
}

/* ====== FREEZE STATE ====== */
.freeze {
  cursor:none !important;
  pointer-events:none !important;
}

.exit-glitch {
  animation:shake .06s infinite steps(1);
}
@keyframes shake {
  25% { transform:translate(-10px,5px); }
  50% { transform:translate(8px,-6px); }
  75% { transform:translate(-6px,-10px); }
}
</style>
</head>

<body>

<audio id="exitSound" src="music/exit-glitch.mp3" preload="auto"></audio>

<div class="logo exit-trigger">
  <img src="img/logo3.png">
</div>

<div class="images">
  <img src="img/1.png" class="zoomable">
  <img src="img/2.png" class="zoomable">
  <img src="img/animation.gif">
</div>

<script>
const logo = document.querySelector('.exit-trigger');
const sound = document.getElementById('exitSound');

logo.addEventListener('click', e => {
  e.stopPropagation();

  /* === 1 КАДР: ЛИЦО === */
  const face = document.createElement('div');
  face.className = 'face-frame';
  face.innerHTML = `<img src="img/face.png">`;
  document.body.appendChild(face);

  requestAnimationFrame(() => {
    face.remove(); // ← РОВНО 1 FRAME
  });

  /* === ЗВУК === */
  sound.currentTime = 0;
  sound.play();

  /* === ГЛИТЧ + ФРИЗ === */
  document.body.classList.add('rgb-glitch','exit-glitch','freeze');

  let chaos = setInterval(() => {
    document.body.style.setProperty('--rgbR', Math.random()*12+4+'px');

    for(let i=0;i<40;i++){
      const n=document.createElement('div');
      n.className='noise-glitch';
      n.style.width=Math.random()*140+20+'px';
      n.style.height=Math.random()*8+2+'px';
      n.style.left=Math.random()*innerWidth+'px';
      n.style.top=Math.random()*innerHeight+'px';
      document.body.appendChild(n);
      setTimeout(()=>n.remove(),100);
    }
  },40);

  /* === ПОЛНЫЙ ФРИЗ === */
  setTimeout(() => {
    clearInterval(chaos);
  },1200);

  /* === ПЕРЕЗАПУСК === */
  setTimeout(() => {
    location.reload();
  },2600);
});
</script>

</body>
</html>
